From 27e8ff24fcaae138b02417a84d08f010e4f8d4f8 Mon Sep 17 00:00:00 2001
From: "Uwe L. Korn" <uwe.korn@quantco.com>
Date: Mon, 12 May 2025 17:57:47 +0200
Subject: [PATCH 3/5] Add a secondary extension directory for package managers

---
 CMakeLists.txt                                |   1 +
 scripts/settings_scripts/config.py            |  10 +-
 .../parse_and_sort_settings_in_json.py        |   2 +
 .../update_settings_header_file.py            |   5 +
 .../operator/helper/physical_set.cpp          |   2 +-
 .../table/system/duckdb_extensions.cpp        |  74 +++++------
 src/include/duckdb/main/config.hpp            |   6 +-
 src/include/duckdb/main/extension_helper.hpp  |   8 +-
 src/include/duckdb/main/setting_info.hpp      |   1 +
 src/include/duckdb/main/settings.hpp          | 120 +++++++++++++++++-
 src/main/config.cpp                           |  50 ++++++--
 src/main/extension/CMakeLists.txt             |   4 +
 src/main/extension/extension_install.cpp      |  97 +++++++++-----
 src/main/extension/extension_load.cpp         |  50 ++++++--
 src/main/settings/autogenerated_settings.cpp  |  16 ---
 src/main/settings/custom_settings.cpp         |  33 +++++
 test/api/test_reset.cpp                       |  13 +-
 test/extension/install_extension.test_slow    |  27 ++++
 18 files changed, 401 insertions(+), 118 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index de6dcc5..4622ae1 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -169,6 +169,7 @@ option(FORCE_WARN_UNUSED "Unused code objects lead to compiler warnings." FALSE)
 option(ENABLE_EXTENSION_AUTOLOADING "Enable extension auto-loading by default." FALSE)
 option(ENABLE_EXTENSION_AUTOINSTALL "Enable extension auto-installing by default." FALSE)
 option(EXTENSION_TESTS_ONLY "Only load the tests for extensions, don't actually build them; useful for testing loadable extensions" FALSE)
+set(EXTENSION_DIRECTORIES "~/.duckdb/extensions" CACHE STRING "Default extension directories (;-separated list on win, : on unix)")
 option(WASM_LOADABLE_EXTENSIONS "WebAssembly build with loadable extensions." FALSE)
 option(ENABLE_SANITIZER "Enable address sanitizer." TRUE)
 option(ENABLE_THREAD_SANITIZER "Enable thread sanitizer." FALSE)
diff --git a/scripts/settings_scripts/config.py b/scripts/settings_scripts/config.py
index 60304cd..51c16d9 100644
--- a/scripts/settings_scripts/config.py
+++ b/scripts/settings_scripts/config.py
@@ -3,7 +3,7 @@ import re
 import subprocess
 import tempfile
 from pathlib import Path
-from typing import Set, List
+from typing import Set, List, Optional
 from functools import total_ordering
 
 # define file paths and global variables
@@ -30,6 +30,7 @@ class Setting:
         name: str,
         description: str,
         sql_type: str,
+        alternative_sql_type: Optional[str],
         scope: str,
         internal_setting: str,
         on_callbacks: List[str],
@@ -42,8 +43,13 @@ class Setting:
         self.name = self._get_valid_name(name)
         self.description = description
         self.sql_type = self._get_sql_type(sql_type)
-        self.return_type = self._get_setting_type(sql_type)
         self.is_enum = sql_type.startswith('ENUM')
+        if alternative_sql_type:
+            self.alternative_sql_type = self._get_sql_type(alternative_sql_type)
+            self.return_type = self._get_setting_type(alternative_sql_type)
+        else:
+            self.alternative_sql_type = None
+            self.return_type = self._get_setting_type(sql_type)
         self.internal_setting = internal_setting
         self.scope = self._get_valid_scope(scope) if scope is not None else None
         self.on_set, self.on_reset = self._get_on_callbacks(on_callbacks)
diff --git a/scripts/settings_scripts/parse_and_sort_settings_in_json.py b/scripts/settings_scripts/parse_and_sort_settings_in_json.py
index 2f0ec7d..e4edfea 100644
--- a/scripts/settings_scripts/parse_and_sort_settings_in_json.py
+++ b/scripts/settings_scripts/parse_and_sort_settings_in_json.py
@@ -18,6 +18,7 @@ def add_all_settings_to_global_list():
         'name',
         'description',
         'type',
+        'alternative_type',
         'scope',
         'internal_setting',
         'on_callbacks',
@@ -42,6 +43,7 @@ def add_all_settings_to_global_list():
             name=entry['name'],
             description=entry['description'],
             sql_type=entry['type'],
+            alternative_sql_type=entry.get('alternative_type'),
             internal_setting=entry.get('internal_setting', entry['name']),
             scope=entry.get('scope', None),
             struct_name=entry.get('struct', ''),
diff --git a/scripts/settings_scripts/update_settings_header_file.py b/scripts/settings_scripts/update_settings_header_file.py
index 6d18f2e..0e20cd1 100644
--- a/scripts/settings_scripts/update_settings_header_file.py
+++ b/scripts/settings_scripts/update_settings_header_file.py
@@ -12,12 +12,17 @@ END_MARKER = "// End of the auto-generated list of settings structures"
 
 
 def extract_declarations(setting) -> str:
+    if setting.alternative_sql_type:
+        alternative_sql_type = f"\"{setting.alternative_sql_type}\""
+    else:
+        alternative_sql_type = "nullptr"
     definition = (
         f"struct {setting.struct_name} {{\n"
         f"    using RETURN_TYPE = {setting.return_type};\n"
         f"    static constexpr const char *Name = \"{setting.name}\";\n"
         f"    static constexpr const char *Description = \"{setting.description}\";\n"
         f"    static constexpr const char *InputType = \"{setting.sql_type}\";\n"
+        f"    static constexpr const char *AlternativeInputType = {alternative_sql_type};\n"
     )
     if setting.scope == "GLOBAL" or setting.scope == "GLOBAL_LOCAL":
         definition += f"    static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);\n"
diff --git a/src/execution/operator/helper/physical_set.cpp b/src/execution/operator/helper/physical_set.cpp
index e8362ad..d9943c0 100644
--- a/src/execution/operator/helper/physical_set.cpp
+++ b/src/execution/operator/helper/physical_set.cpp
@@ -58,7 +58,7 @@ SourceResultType PhysicalSet::GetData(ExecutionContext &context, DataChunk &chun
 		}
 	}
 
-	Value input_val = value.CastAs(context.client, DBConfig::ParseLogicalType(option->parameter_type));
+	Value input_val = DBConfig::CastOptionIfNecessary(context.client, value, *option);
 	if (option->default_value) {
 		if (option->set_callback) {
 			SettingCallbackInfo info(context.client, variable_scope);
diff --git a/src/function/table/system/duckdb_extensions.cpp b/src/function/table/system/duckdb_extensions.cpp
index 6a528c1..f467a64 100644
--- a/src/function/table/system/duckdb_extensions.cpp
+++ b/src/function/table/system/duckdb_extensions.cpp
@@ -97,44 +97,46 @@ unique_ptr<GlobalTableFunctionState> DuckDBExtensionsInit(ClientContext &context
 
 	// Secondly we scan all installed extensions and their install info
 #ifndef WASM_LOADABLE_EXTENSIONS
-	auto ext_directory = ExtensionHelper::GetExtensionDirectoryPath(context);
-	fs.ListFiles(ext_directory, [&](const string &path, bool is_directory) {
-		if (!StringUtil::EndsWith(path, ".duckdb_extension")) {
-			return;
-		}
-		ExtensionInformation info;
-		info.name = fs.ExtractBaseName(path);
-		info.installed = true;
-		info.loaded = false;
-		info.file_path = fs.JoinPath(ext_directory, path);
-
-		// Check the info file for its installation source
-		auto info_file_path = fs.JoinPath(ext_directory, path + ".info");
-
-		// Read the info file
-		auto extension_install_info = ExtensionInstallInfo::TryReadInfoFile(fs, info_file_path, info.name);
-		info.install_mode = extension_install_info->mode;
-		info.extension_version = extension_install_info->version;
-		if (extension_install_info->mode == ExtensionInstallMode::REPOSITORY) {
-			info.installed_from = ExtensionRepository::GetRepository(extension_install_info->repository_url);
-		} else {
-			info.installed_from = extension_install_info->full_path;
-		}
+	auto ext_directories = ExtensionHelper::GetExtensionDirectoryPath(context);
+	for (const auto &ext_directory : ext_directories) {
+		fs.ListFiles(ext_directory, [&](const string &path, bool is_directory) {
+			if (!StringUtil::EndsWith(path, ".duckdb_extension")) {
+				return;
+			}
+			ExtensionInformation info;
+			info.name = fs.ExtractBaseName(path);
+			info.installed = true;
+			info.loaded = false;
+			info.file_path = fs.JoinPath(ext_directory, path);
+
+			// Check the info file for its installation source
+			auto info_file_path = fs.JoinPath(ext_directory, path + ".info");
+
+			// Read the info file
+			auto extension_install_info = ExtensionInstallInfo::TryReadInfoFile(fs, info_file_path, info.name);
+			info.install_mode = extension_install_info->mode;
+			info.extension_version = extension_install_info->version;
+			if (extension_install_info->mode == ExtensionInstallMode::REPOSITORY) {
+				info.installed_from = ExtensionRepository::GetRepository(extension_install_info->repository_url);
+			} else {
+				info.installed_from = extension_install_info->full_path;
+			}
 
-		auto entry = installed_extensions.find(info.name);
-		if (entry == installed_extensions.end()) {
-			installed_extensions[info.name] = std::move(info);
-		} else {
-			if (entry->second.install_mode != ExtensionInstallMode::STATICALLY_LINKED) {
-				entry->second.file_path = info.file_path;
-				entry->second.install_mode = info.install_mode;
-				entry->second.installed_from = info.installed_from;
-				entry->second.install_mode = info.install_mode;
-				entry->second.extension_version = info.extension_version;
+			auto entry = installed_extensions.find(info.name);
+			if (entry == installed_extensions.end()) {
+				installed_extensions[info.name] = std::move(info);
+			} else {
+				if (entry->second.install_mode != ExtensionInstallMode::STATICALLY_LINKED) {
+					entry->second.file_path = info.file_path;
+					entry->second.install_mode = info.install_mode;
+					entry->second.installed_from = info.installed_from;
+					entry->second.install_mode = info.install_mode;
+					entry->second.extension_version = info.extension_version;
+				}
+				entry->second.installed = true;
 			}
-			entry->second.installed = true;
-		}
-	});
+		});
+	}
 #endif
 
 	// Finally, we check the list of currently loaded extensions
diff --git a/src/include/duckdb/main/config.hpp b/src/include/duckdb/main/config.hpp
index 6b99570..9c37b4e 100644
--- a/src/include/duckdb/main/config.hpp
+++ b/src/include/duckdb/main/config.hpp
@@ -169,8 +169,8 @@ struct DBConfigOptions {
 	case_insensitive_map_t<Value> set_variables;
 	//! Database configuration variable default values;
 	case_insensitive_map_t<Value> set_variable_defaults;
-	//! Directory to store extension binaries in
-	string extension_directory;
+	//! Directories to store extension binaries in
+	vector<string> extension_directories;
 	//! Whether unsigned extensions should be loaded
 	bool allow_unsigned_extensions = false;
 	//! Whether community extensions should be loaded
@@ -306,6 +306,8 @@ public:
 	DUCKDB_API void ResetOption(const String &name);
 	DUCKDB_API void ResetGenericOption(const String &name);
 	static LogicalType ParseLogicalType(const string &type);
+	static Value CastOptionIfNecessary(ClientContext &context, const Value &value, const ConfigurationOption &option);
+	static Value CastOptionIfNecessary(const Value &value, const ConfigurationOption &option);
 
 	DUCKDB_API void CheckLock(const String &name);
 
diff --git a/src/include/duckdb/main/extension_helper.hpp b/src/include/duckdb/main/extension_helper.hpp
index 5b55a28..a9f5875 100644
--- a/src/include/duckdb/main/extension_helper.hpp
+++ b/src/include/duckdb/main/extension_helper.hpp
@@ -122,9 +122,9 @@ public:
 	static string ExtensionDirectory(ClientContext &context);
 	static string ExtensionDirectory(DatabaseInstance &db, FileSystem &fs);
 
-	// Get the extension directory path
-	static string GetExtensionDirectoryPath(ClientContext &context);
-	static string GetExtensionDirectoryPath(DatabaseInstance &db, FileSystem &fs);
+	// Get all extension directory paths
+	static vector<string> GetExtensionDirectoryPath(ClientContext &context);
+	static vector<string> GetExtensionDirectoryPath(DatabaseInstance &db, FileSystem &fs);
 
 	// Check signature of an Extension stored as FileHandle
 	static bool CheckExtensionSignature(FileHandle &handle, ParsedExtensionMetaData &parsed_metadata,
@@ -250,7 +250,7 @@ private:
 	                                                                 ExtensionInstallOptions &options,
 	                                                                 optional_ptr<ClientContext> context = nullptr);
 	static const vector<string> PathComponents();
-	static string DefaultExtensionFolder(FileSystem &fs);
+	static vector<string> DefaultExtensionFolders(FileSystem &fs);
 	static bool AllowAutoInstall(const string &extension);
 	static ExtensionInitResult InitialLoad(DatabaseInstance &db, FileSystem &fs, const string &extension);
 	static bool TryInitialLoad(DatabaseInstance &db, FileSystem &fs, const string &extension,
diff --git a/src/include/duckdb/main/setting_info.hpp b/src/include/duckdb/main/setting_info.hpp
index 7968c4d..bd94b8b 100644
--- a/src/include/duckdb/main/setting_info.hpp
+++ b/src/include/duckdb/main/setting_info.hpp
@@ -74,6 +74,7 @@ struct ConfigurationOption {
 	const char *name;
 	const char *description;
 	const char *parameter_type;
+	const char *alternative_parameter_type;
 	set_global_function_t set_global;
 	set_local_function_t set_local;
 	reset_global_function_t reset_global;
diff --git a/src/include/duckdb/main/settings.hpp b/src/include/duckdb/main/settings.hpp
index de5d1a1..a32ff5d 100644
--- a/src/include/duckdb/main/settings.hpp
+++ b/src/include/duckdb/main/settings.hpp
@@ -33,6 +33,7 @@ struct AccessModeSetting {
 	static constexpr const char *Name = "access_mode";
 	static constexpr const char *Description = "Access mode of the database (AUTOMATIC, READ_ONLY or READ_WRITE)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static bool OnGlobalSet(DatabaseInstance *db, DBConfig &config, const Value &input);
@@ -44,6 +45,7 @@ struct AllocatorBackgroundThreadsSetting {
 	static constexpr const char *Name = "allocator_background_threads";
 	static constexpr const char *Description = "Whether to enable the allocator background thread.";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static bool OnGlobalSet(DatabaseInstance *db, DBConfig &config, const Value &input);
@@ -57,6 +59,7 @@ struct AllocatorBulkDeallocationFlushThresholdSetting {
 	static constexpr const char *Description =
 	    "If a bulk deallocation larger than this occurs, flush outstanding allocations.";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -68,6 +71,7 @@ struct AllocatorFlushThresholdSetting {
 	static constexpr const char *Description =
 	    "Peak allocation threshold at which to flush the allocator after completing a task.";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -78,6 +82,7 @@ struct AllowCommunityExtensionsSetting {
 	static constexpr const char *Name = "allow_community_extensions";
 	static constexpr const char *Description = "Allow to load community built extensions";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static bool OnGlobalSet(DatabaseInstance *db, DBConfig &config, const Value &input);
@@ -90,6 +95,7 @@ struct AllowExtensionsMetadataMismatchSetting {
 	static constexpr const char *Name = "allow_extensions_metadata_mismatch";
 	static constexpr const char *Description = "Allow to load extensions with not compatible metadata";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -100,6 +106,7 @@ struct AllowPersistentSecretsSetting {
 	static constexpr const char *Description =
 	    "Allow the creation of persistent secrets, that are stored and loaded on restarts";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -110,6 +117,7 @@ struct AllowUnredactedSecretsSetting {
 	static constexpr const char *Name = "allow_unredacted_secrets";
 	static constexpr const char *Description = "Allow printing unredacted secrets";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static bool OnGlobalSet(DatabaseInstance *db, DBConfig &config, const Value &input);
@@ -122,6 +130,7 @@ struct AllowUnsignedExtensionsSetting {
 	static constexpr const char *Name = "allow_unsigned_extensions";
 	static constexpr const char *Description = "Allow to load extensions with invalid or missing signatures";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static bool OnGlobalSet(DatabaseInstance *db, DBConfig &config, const Value &input);
@@ -135,6 +144,7 @@ struct AllowedDirectoriesSetting {
 	static constexpr const char *Description = "List of directories/prefixes that are ALWAYS allowed to be queried - "
 	                                           "even when enable_external_access is false";
 	static constexpr const char *InputType = "VARCHAR[]";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -146,6 +156,7 @@ struct AllowedPathsSetting {
 	static constexpr const char *Description =
 	    "List of files that are ALWAYS allowed to be queried - even when enable_external_access is false";
 	static constexpr const char *InputType = "VARCHAR[]";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -157,6 +168,7 @@ struct ArrowLargeBufferSizeSetting {
 	static constexpr const char *Description =
 	    "Whether Arrow buffers for strings, blobs, uuids and bits should be exported using large buffers";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -168,6 +180,7 @@ struct ArrowLosslessConversionSetting {
 	    "Whenever a DuckDB type does not have a clear native or canonical extension match in Arrow, export the types "
 	    "with a duckdb.type_name extension name.";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -178,6 +191,7 @@ struct ArrowOutputListViewSetting {
 	static constexpr const char *Description =
 	    "Whether export to Arrow format should use ListView as the physical layout for LIST columns";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -188,6 +202,7 @@ struct ArrowOutputVersionSetting {
 	static constexpr const char *Description =
 	    "Whether strings should be produced by DuckDB in Utf8View format instead of Utf8";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "1.0";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -199,6 +214,7 @@ struct AsofLoopJoinThresholdSetting {
 	static constexpr const char *Description =
 	    "The maximum number of rows we need on the left side of an ASOF join to use a nested loop join";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "64";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -209,6 +225,7 @@ struct AutoinstallExtensionRepositorySetting {
 	static constexpr const char *Description =
 	    "Overrides the custom endpoint for extension installation on autoloading";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -220,6 +237,7 @@ struct AutoinstallKnownExtensionsSetting {
 	static constexpr const char *Description =
 	    "Whether known extensions are allowed to be automatically installed when a query depends on them";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -231,6 +249,7 @@ struct AutoloadKnownExtensionsSetting {
 	static constexpr const char *Description =
 	    "Whether known extensions are allowed to be automatically loaded when a query depends on them";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -242,6 +261,7 @@ struct CatalogErrorMaxSchemasSetting {
 	static constexpr const char *Description =
 	    "The maximum number of schemas the system will scan for \"did you mean...\" style errors in the catalog";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "100";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -252,6 +272,7 @@ struct CheckpointThresholdSetting {
 	static constexpr const char *Description =
 	    "The WAL size threshold at which to automatically trigger a checkpoint (e.g. 1GB)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -262,6 +283,7 @@ struct CustomExtensionRepositorySetting {
 	static constexpr const char *Name = "custom_extension_repository";
 	static constexpr const char *Description = "Overrides the custom endpoint for remote extension installation";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -272,6 +294,7 @@ struct CustomProfilingSettingsSetting {
 	static constexpr const char *Name = "custom_profiling_settings";
 	static constexpr const char *Description = "Accepts a JSON enabling custom metrics";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -282,6 +305,7 @@ struct CustomUserAgentSetting {
 	static constexpr const char *Name = "custom_user_agent";
 	static constexpr const char *Description = "Metadata from DuckDB callers";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -292,6 +316,7 @@ struct DebugAsofIejoinSetting {
 	static constexpr const char *Name = "debug_asof_iejoin";
 	static constexpr const char *Description = "DEBUG SETTING: force use of IEJoin to implement AsOf joins";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -302,6 +327,7 @@ struct DebugCheckpointAbortSetting {
 	static constexpr const char *Description =
 	    "DEBUG SETTING: trigger an abort while checkpointing for testing purposes";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "NONE";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -313,6 +339,7 @@ struct DebugForceExternalSetting {
 	static constexpr const char *Description =
 	    "DEBUG SETTING: force out-of-core computation for operators that support it, used for testing";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -324,6 +351,7 @@ struct DebugForceNoCrossProductSetting {
 	static constexpr const char *Description =
 	    "DEBUG SETTING: Force disable cross product generation when hyper graph isn't connected, used for testing";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -333,6 +361,7 @@ struct DebugSkipCheckpointOnCommitSetting {
 	static constexpr const char *Name = "debug_skip_checkpoint_on_commit";
 	static constexpr const char *Description = "DEBUG SETTING: skip checkpointing on commit";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -351,6 +380,7 @@ struct DebugVerifyVectorSetting {
 	static constexpr const char *Name = "debug_verify_vector";
 	static constexpr const char *Description = "DEBUG SETTING: enable vector verification";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "NONE";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -361,6 +391,7 @@ struct DebugWindowModeSetting {
 	static constexpr const char *Name = "debug_window_mode";
 	static constexpr const char *Description = "DEBUG SETTING: switch window mode to use";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "WINDOW";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -372,6 +403,7 @@ struct DefaultBlockSizeSetting {
 	static constexpr const char *Description =
 	    "The default block size for new duckdb database files (new as-in, they do not yet exist).";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -382,6 +414,7 @@ struct DefaultCollationSetting {
 	static constexpr const char *Name = "default_collation";
 	static constexpr const char *Description = "The collation setting used when none is specified";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -392,6 +425,7 @@ struct DefaultNullOrderSetting {
 	static constexpr const char *Name = "default_null_order";
 	static constexpr const char *Description = "NULL ordering used when none is specified (NULLS_FIRST or NULLS_LAST)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "NULLS_LAST";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -402,6 +436,7 @@ struct DefaultOrderSetting {
 	static constexpr const char *Name = "default_order";
 	static constexpr const char *Description = "The order type used when none is specified (ASC or DESC)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "ASCENDING";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -412,6 +447,7 @@ struct DefaultSecretStorageSetting {
 	static constexpr const char *Name = "default_secret_storage";
 	static constexpr const char *Description = "Allows switching the default storage for secrets";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -424,6 +460,7 @@ struct DisableDatabaseInvalidationSetting {
 	    "Disables invalidating the database instance when encountering a fatal error. Should be used with great care, "
 	    "as DuckDB cannot guarantee correct behavior after a fatal error.";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static bool OnGlobalSet(DatabaseInstance *db, DBConfig &config, const Value &input);
@@ -436,6 +473,7 @@ struct DisableTimestamptzCastsSetting {
 	static constexpr const char *Name = "disable_timestamptz_casts";
 	static constexpr const char *Description = "Disable casting from timestamp to timestamptz ";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -445,6 +483,7 @@ struct DisabledCompressionMethodsSetting {
 	static constexpr const char *Name = "disabled_compression_methods";
 	static constexpr const char *Description = "Disable a specific set of compression methods (comma separated)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -455,6 +494,7 @@ struct DisabledFilesystemsSetting {
 	static constexpr const char *Name = "disabled_filesystems";
 	static constexpr const char *Description = "Disable specific file systems preventing access (e.g. LocalFileSystem)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -465,6 +505,7 @@ struct DisabledLogTypes {
 	static constexpr const char *Name = "disabled_log_types";
 	static constexpr const char *Description = "Sets the list of disabled loggers";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -475,6 +516,7 @@ struct DisabledOptimizersSetting {
 	static constexpr const char *Name = "disabled_optimizers";
 	static constexpr const char *Description = "DEBUG SETTING: disable a specific set of optimizers (comma separated)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -485,6 +527,7 @@ struct DuckDBAPISetting {
 	static constexpr const char *Name = "duckdb_api";
 	static constexpr const char *Description = "DuckDB API surface";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -496,6 +539,7 @@ struct DynamicOrFilterThresholdSetting {
 	static constexpr const char *Description =
 	    "The maximum amount of OR filters we generate dynamically from a hash join";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "50";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -507,6 +551,7 @@ struct EnableExternalAccessSetting {
 	    "Allow the database to access external state (through e.g. loading/installing modules, COPY TO/FROM, CSV "
 	    "readers, pandas replacement scans, etc)";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static bool OnGlobalSet(DatabaseInstance *db, DBConfig &config, const Value &input);
@@ -519,6 +564,7 @@ struct EnableExternalFileCacheSetting {
 	static constexpr const char *Name = "enable_external_file_cache";
 	static constexpr const char *Description = "Allow the database to cache external files (e.g., Parquet) in memory.";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -530,6 +576,7 @@ struct EnableFSSTVectorsSetting {
 	static constexpr const char *Description =
 	    "Allow scans on FSST compressed segments to emit compressed vectors to utilize late decompression";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -539,6 +586,7 @@ struct EnableHTTPLoggingSetting {
 	static constexpr const char *Name = "enable_http_logging";
 	static constexpr const char *Description = "(deprecated) Enables HTTP logging";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -549,6 +597,7 @@ struct EnableHTTPMetadataCacheSetting {
 	static constexpr const char *Name = "enable_http_metadata_cache";
 	static constexpr const char *Description = "Whether or not the global http metadata is used to cache HTTP metadata";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -559,6 +608,7 @@ struct EnableLogging {
 	static constexpr const char *Name = "enable_logging";
 	static constexpr const char *Description = "Enables the logger";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -570,6 +620,7 @@ struct EnableMacroDependenciesSetting {
 	static constexpr const char *Description =
 	    "Enable created MACROs to create dependencies on the referenced objects (such as tables)";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -579,6 +630,7 @@ struct EnableObjectCacheSetting {
 	static constexpr const char *Name = "enable_object_cache";
 	static constexpr const char *Description = "[PLACEHOLDER] Legacy setting - does nothing";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -589,6 +641,7 @@ struct EnableProfilingSetting {
 	static constexpr const char *Description =
 	    "Enables profiling, and sets the output format (JSON, QUERY_TREE, QUERY_TREE_OPTIMIZER)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -600,6 +653,7 @@ struct EnableProgressBarSetting {
 	static constexpr const char *Description =
 	    "Enables the progress bar, printing progress to the terminal for long queries";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static bool OnLocalSet(ClientContext &context, const Value &input);
@@ -613,6 +667,7 @@ struct EnableProgressBarPrintSetting {
 	static constexpr const char *Description =
 	    "Controls the printing of the progress bar, when 'enable_progress_bar' is true";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -624,6 +679,7 @@ struct EnableViewDependenciesSetting {
 	static constexpr const char *Description =
 	    "Enable created VIEWs to create dependencies on the referenced objects (such as tables)";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -633,6 +689,7 @@ struct EnabledLogTypes {
 	static constexpr const char *Name = "enabled_log_types";
 	static constexpr const char *Description = "Sets the list of enabled loggers";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -643,6 +700,7 @@ struct ErrorsAsJSONSetting {
 	static constexpr const char *Name = "errors_as_json";
 	static constexpr const char *Description = "Output error messages as structured JSON instead of as a raw string";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -653,6 +711,7 @@ struct ExperimentalMetadataReuseSetting {
 	static constexpr const char *Name = "experimental_metadata_reuse";
 	static constexpr const char *Description = "EXPERIMENTAL: Re-use row group and table metadata when checkpointing.";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -662,16 +721,18 @@ struct ExplainOutputSetting {
 	static constexpr const char *Name = "explain_output";
 	static constexpr const char *Description = "Output of EXPLAIN statements (ALL, OPTIMIZED_ONLY, PHYSICAL_ONLY)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
 };
 
 struct ExtensionDirectorySetting {
-	using RETURN_TYPE = string;
+	using RETURN_TYPE = vector<string>;
 	static constexpr const char *Name = "extension_directory";
 	static constexpr const char *Description = "Set the directory to store extensions in";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = "VARCHAR[]";
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -682,6 +743,7 @@ struct ExternalThreadsSetting {
 	static constexpr const char *Name = "external_threads";
 	static constexpr const char *Description = "The number of external threads that work on DuckDB tasks.";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static bool OnGlobalSet(DatabaseInstance *db, DBConfig &config, const Value &input);
@@ -694,6 +756,7 @@ struct FileSearchPathSetting {
 	static constexpr const char *Name = "file_search_path";
 	static constexpr const char *Description = "A comma separated list of directories to search for input files";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -704,6 +767,7 @@ struct ForceBitpackingModeSetting {
 	static constexpr const char *Name = "force_bitpacking_mode";
 	static constexpr const char *Description = "DEBUG SETTING: forces a specific bitpacking mode";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -714,6 +778,7 @@ struct ForceCompressionSetting {
 	static constexpr const char *Name = "force_compression";
 	static constexpr const char *Description = "DEBUG SETTING: forces a specific compression method to be used";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -724,6 +789,7 @@ struct HomeDirectorySetting {
 	static constexpr const char *Name = "home_directory";
 	static constexpr const char *Description = "Sets the home directory used by the system";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -735,6 +801,7 @@ struct HTTPLoggingOutputSetting {
 	static constexpr const char *Description =
 	    "(deprecated) The file to which HTTP logging output should be saved, or empty to print to the terminal";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -745,6 +812,7 @@ struct HTTPProxySetting {
 	static constexpr const char *Name = "http_proxy";
 	static constexpr const char *Description = "HTTP proxy host";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -755,6 +823,7 @@ struct HTTPProxyPasswordSetting {
 	static constexpr const char *Name = "http_proxy_password";
 	static constexpr const char *Description = "Password for HTTP proxy";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -765,6 +834,7 @@ struct HTTPProxyUsernameSetting {
 	static constexpr const char *Name = "http_proxy_username";
 	static constexpr const char *Description = "Username for HTTP proxy";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -776,6 +846,7 @@ struct IeeeFloatingPointOpsSetting {
 	static constexpr const char *Description =
 	    "Use IEE754-compliant floating point operations (returning NAN instead of errors/NULL).";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "true";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -786,6 +857,7 @@ struct ImmediateTransactionModeSetting {
 	static constexpr const char *Description =
 	    "Whether transactions should be started lazily when needed, or immediately when BEGIN TRANSACTION is called";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -797,6 +869,7 @@ struct IndexScanMaxCountSetting {
 	    "The maximum index scan count sets a threshold for index scans. If fewer than MAX(index_scan_max_count, "
 	    "index_scan_percentage * total_row_count) rows match, we perform an index scan instead of a table scan.";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "2048";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -808,6 +881,7 @@ struct IndexScanPercentageSetting {
 	    "The index scan percentage sets a threshold for index scans. If fewer than MAX(index_scan_max_count, "
 	    "index_scan_percentage * total_row_count) rows match, we perform an index scan instead of a table scan.";
 	static constexpr const char *InputType = "DOUBLE";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "0.001";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -819,6 +893,7 @@ struct IntegerDivisionSetting {
 	static constexpr const char *Description =
 	    "Whether or not the / operator defaults to integer division, or to floating point division";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -829,6 +904,7 @@ struct LambdaSyntaxSetting {
 	static constexpr const char *Description =
 	    "Configures the use of the deprecated single arrow operator (->) for lambda functions.";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -840,6 +916,7 @@ struct LateMaterializationMaxRowsSetting {
 	static constexpr const char *Description =
 	    "The maximum amount of rows in the LIMIT/SAMPLE for which we trigger late materialization";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "50";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -849,6 +926,7 @@ struct LockConfigurationSetting {
 	static constexpr const char *Name = "lock_configuration";
 	static constexpr const char *Description = "Whether or not the configuration can be altered";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -860,6 +938,7 @@ struct LogQueryPathSetting {
 	static constexpr const char *Description =
 	    "Specifies the path to which queries should be logged (default: NULL, queries are not logged)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -870,6 +949,7 @@ struct LoggingLevel {
 	static constexpr const char *Name = "logging_level";
 	static constexpr const char *Description = "The log level which will be recorded in the log";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -880,6 +960,7 @@ struct LoggingMode {
 	static constexpr const char *Name = "logging_mode";
 	static constexpr const char *Description = "Determines which types of log messages are logged";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -890,6 +971,7 @@ struct LoggingStorage {
 	static constexpr const char *Name = "logging_storage";
 	static constexpr const char *Description = "Set the logging storage (memory/stdout/file/<custom>)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -902,6 +984,7 @@ struct MaxExpressionDepthSetting {
 	    "The maximum expression depth limit in the parser. WARNING: increasing this setting and using very deep "
 	    "expressions might lead to stack overflow errors.";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -912,6 +995,7 @@ struct MaxMemorySetting {
 	static constexpr const char *Name = "max_memory";
 	static constexpr const char *Description = "The maximum memory of the system (e.g. 1GB)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -923,6 +1007,7 @@ struct MaxTempDirectorySizeSetting {
 	static constexpr const char *Description =
 	    "The maximum amount of data stored inside the 'temp_directory' (when set) (e.g. 1GB)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -933,6 +1018,7 @@ struct MaxVacuumTasksSetting {
 	static constexpr const char *Name = "max_vacuum_tasks";
 	static constexpr const char *Description = "The maximum vacuum tasks to schedule during a checkpoint.";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "100";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -942,6 +1028,7 @@ struct MergeJoinThresholdSetting {
 	static constexpr const char *Name = "merge_join_threshold";
 	static constexpr const char *Description = "The maximum number of rows on either table to choose a merge join";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "1000";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -952,6 +1039,7 @@ struct NestedLoopJoinThresholdSetting {
 	static constexpr const char *Description =
 	    "The maximum number of rows on either table to choose a nested loop join";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "5";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -961,6 +1049,7 @@ struct OldImplicitCastingSetting {
 	static constexpr const char *Name = "old_implicit_casting";
 	static constexpr const char *Description = "Allow implicit casting to/from VARCHAR";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -971,6 +1060,7 @@ struct OrderByNonIntegerLiteralSetting {
 	static constexpr const char *Description =
 	    "Allow ordering by non-integer literals - ordering by such literals has no effect.";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -980,6 +1070,7 @@ struct OrderedAggregateThresholdSetting {
 	static constexpr const char *Name = "ordered_aggregate_threshold";
 	static constexpr const char *Description = "The number of rows to accumulate before sorting, used for tuning";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "262144";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -991,6 +1082,7 @@ struct PartitionedWriteFlushThresholdSetting {
 	static constexpr const char *Description =
 	    "The threshold in number of rows after which we flush a thread state when writing using PARTITION_BY";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "524288";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -1001,6 +1093,7 @@ struct PartitionedWriteMaxOpenFilesSetting {
 	static constexpr const char *Description =
 	    "The maximum amount of files the system can keep open before flushing to disk when writing using PARTITION_BY";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "100";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -1010,6 +1103,7 @@ struct PasswordSetting {
 	static constexpr const char *Name = "password";
 	static constexpr const char *Description = "The password to use. Ignored for legacy compatibility.";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1020,6 +1114,7 @@ struct PerfectHtThresholdSetting {
 	static constexpr const char *Name = "perfect_ht_threshold";
 	static constexpr const char *Description = "Threshold in bytes for when to use a perfect hash table";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "12";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 	static void OnSet(SettingCallbackInfo &info, Value &input);
@@ -1031,6 +1126,7 @@ struct PinThreadsSetting {
 	static constexpr const char *Description =
 	    "Whether to pin threads to cores (Linux only, default AUTO: on when there are more than 64 cores)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1042,6 +1138,7 @@ struct PivotFilterThresholdSetting {
 	static constexpr const char *Description =
 	    "The threshold to switch from using filtered aggregates to LIST with a dedicated pivot operator";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "20";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -1051,6 +1148,7 @@ struct PivotLimitSetting {
 	static constexpr const char *Name = "pivot_limit";
 	static constexpr const char *Description = "The maximum number of pivot columns in a pivot statement";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "100000";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -1060,6 +1158,7 @@ struct PreferRangeJoinsSetting {
 	static constexpr const char *Name = "prefer_range_joins";
 	static constexpr const char *Description = "Force use of range joins with mixed predicates";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -1070,6 +1169,7 @@ struct PreserveIdentifierCaseSetting {
 	static constexpr const char *Description =
 	    "Whether or not to preserve the identifier case, instead of always lowercasing all non-quoted identifiers";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "true";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -1081,6 +1181,7 @@ struct PreserveInsertionOrderSetting {
 	    "Whether or not to preserve insertion order. If set to false the system is allowed to re-order any results "
 	    "that do not contain ORDER BY clauses.";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "true";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -1091,6 +1192,7 @@ struct ProduceArrowStringViewSetting {
 	static constexpr const char *Description =
 	    "Whether Arrow strings should be produced by DuckDB in Utf8View format instead of Utf8";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "false";
 	static constexpr SetScope DefaultScope = SetScope::GLOBAL;
 };
@@ -1101,6 +1203,7 @@ struct ProfileOutputSetting {
 	static constexpr const char *Description =
 	    "The file to which profile output should be saved, or empty to print to the terminal";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -1111,6 +1214,7 @@ struct ProfilingCoverageSetting {
 	static constexpr const char *Name = "profiling_coverage";
 	static constexpr const char *Description = "The profiling coverage (SELECT or ALL)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -1121,6 +1225,7 @@ struct ProfilingModeSetting {
 	static constexpr const char *Name = "profiling_mode";
 	static constexpr const char *Description = "The profiling mode (STANDARD or DETAILED)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -1132,6 +1237,7 @@ struct ProgressBarTimeSetting {
 	static constexpr const char *Description =
 	    "Sets the time (in milliseconds) how long a query needs to take before we start printing a progress bar";
 	static constexpr const char *InputType = "BIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -1143,6 +1249,7 @@ struct ScalarSubqueryErrorOnMultipleRowsSetting {
 	static constexpr const char *Description =
 	    "When a scalar subquery returns multiple rows - return a random row instead of returning an error.";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static constexpr const char *DefaultValue = "true";
 	static constexpr SetScope DefaultScope = SetScope::SESSION;
 };
@@ -1153,6 +1260,7 @@ struct SchedulerProcessPartialSetting {
 	static constexpr const char *Description =
 	    "Partially process tasks before rescheduling - allows for more scheduler fairness between separate queries";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1164,6 +1272,7 @@ struct SchemaSetting {
 	static constexpr const char *Description =
 	    "Sets the default search schema. Equivalent to setting search_path to a single value.";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -1175,6 +1284,7 @@ struct SearchPathSetting {
 	static constexpr const char *Description =
 	    "Sets the default catalog search path as a comma-separated list of values";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -1185,6 +1295,7 @@ struct SecretDirectorySetting {
 	static constexpr const char *Name = "secret_directory";
 	static constexpr const char *Description = "Set the directory to which persistent secrets are stored";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1195,6 +1306,7 @@ struct StorageCompatibilityVersionSetting {
 	static constexpr const char *Name = "storage_compatibility_version";
 	static constexpr const char *Description = "Serialize on checkpoint with compatibility for a given duckdb version";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1206,6 +1318,7 @@ struct StreamingBufferSizeSetting {
 	static constexpr const char *Description =
 	    "The maximum memory to buffer between fetching from a streaming result (e.g. 1GB)";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetLocal(ClientContext &context, const Value &parameter);
 	static void ResetLocal(ClientContext &context);
 	static Value GetSetting(const ClientContext &context);
@@ -1216,6 +1329,7 @@ struct TempDirectorySetting {
 	static constexpr const char *Name = "temp_directory";
 	static constexpr const char *Description = "Set the directory to which to write temp files";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1226,6 +1340,7 @@ struct TempFileEncryptionSetting {
 	static constexpr const char *Name = "temp_file_encryption";
 	static constexpr const char *Description = "Encrypt all temporary files if database is encrypted";
 	static constexpr const char *InputType = "BOOLEAN";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1236,6 +1351,7 @@ struct ThreadsSetting {
 	static constexpr const char *Name = "threads";
 	static constexpr const char *Description = "The number of total threads used by the system.";
 	static constexpr const char *InputType = "BIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1246,6 +1362,7 @@ struct UsernameSetting {
 	static constexpr const char *Name = "username";
 	static constexpr const char *Description = "The username to use. Ignored for legacy compatibility.";
 	static constexpr const char *InputType = "VARCHAR";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
@@ -1257,6 +1374,7 @@ struct ZstdMinStringLengthSetting {
 	static constexpr const char *Description =
 	    "The (average) length at which to enable ZSTD compression, defaults to 4096";
 	static constexpr const char *InputType = "UBIGINT";
+	static constexpr const char *AlternativeInputType = nullptr;
 	static void SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &parameter);
 	static void ResetGlobal(DatabaseInstance *db, DBConfig &config);
 	static Value GetSetting(const ClientContext &context);
diff --git a/src/main/config.cpp b/src/main/config.cpp
index d474181..8f1b183 100644
--- a/src/main/config.cpp
+++ b/src/main/config.cpp
@@ -24,31 +24,35 @@ bool DBConfigOptions::debug_print_bindings = false;
 
 #define DUCKDB_SETTING(_PARAM)                                                                                         \
 	{                                                                                                                  \
-		_PARAM::Name, _PARAM::Description, _PARAM::InputType, nullptr, nullptr, nullptr, nullptr, nullptr,             \
-		    _PARAM::DefaultScope, _PARAM::DefaultValue, nullptr                                                        \
+		_PARAM::Name, _PARAM::Description, _PARAM::InputType, _PARAM::AlternativeInputType, nullptr, nullptr, nullptr, \
+		    nullptr, nullptr, _PARAM::DefaultScope, _PARAM::DefaultValue, nullptr                                      \
 	}
 #define DUCKDB_SETTING_CALLBACK(_PARAM)                                                                                \
 	{                                                                                                                  \
-		_PARAM::Name, _PARAM::Description, _PARAM::InputType, nullptr, nullptr, nullptr, nullptr, nullptr,             \
-		    _PARAM::DefaultScope, _PARAM::DefaultValue, _PARAM::OnSet                                                  \
+		_PARAM::Name, _PARAM::Description, _PARAM::InputType, _PARAM::AlternativeInputType, nullptr, nullptr, nullptr, \
+		    nullptr, nullptr, _PARAM::DefaultScope, _PARAM::DefaultValue, _PARAM::OnSet                                \
 	}
 #define DUCKDB_GLOBAL(_PARAM)                                                                                          \
 	{                                                                                                                  \
-		_PARAM::Name, _PARAM::Description, _PARAM::InputType, _PARAM::SetGlobal, nullptr, _PARAM::ResetGlobal,         \
-		    nullptr, _PARAM::GetSetting, SetScope::AUTOMATIC, nullptr, nullptr                                         \
+		_PARAM::Name, _PARAM::Description, _PARAM::InputType, _PARAM::AlternativeInputType, _PARAM::SetGlobal,         \
+		    nullptr, _PARAM::ResetGlobal, nullptr, _PARAM::GetSetting, SetScope::AUTOMATIC, nullptr, nullptr           \
 	}
 #define DUCKDB_LOCAL(_PARAM)                                                                                           \
 	{                                                                                                                  \
-		_PARAM::Name, _PARAM::Description, _PARAM::InputType, nullptr, _PARAM::SetLocal, nullptr, _PARAM::ResetLocal,  \
-		    _PARAM::GetSetting, SetScope::AUTOMATIC, nullptr, nullptr                                                  \
+		_PARAM::Name, _PARAM::Description, _PARAM::InputType, _PARAM::AlternativeInputType, nullptr, _PARAM::SetLocal, \
+		    nullptr, _PARAM::ResetLocal, _PARAM::GetSetting, SetScope::AUTOMATIC, nullptr, nullptr                     \
 	}
 #define DUCKDB_GLOBAL_LOCAL(_PARAM)                                                                                    \
 	{                                                                                                                  \
-		_PARAM::Name, _PARAM::Description, _PARAM::InputType, _PARAM::SetGlobal, _PARAM::SetLocal,                     \
-		    _PARAM::ResetGlobal, _PARAM::ResetLocal, _PARAM::GetSetting, SetScope::AUTOMATIC, nullptr, nullptr         \
+		_PARAM::Name, _PARAM::Description, _PARAM::InputType, _PARAM::AlternativeInputType, _PARAM::SetGlobal,         \
+		    _PARAM::SetLocal, _PARAM::ResetGlobal, _PARAM::ResetLocal, _PARAM::GetSetting, SetScope::AUTOMATIC,        \
+		    nullptr, nullptr                                                                                           \
 	}
 #define FINAL_SETTING                                                                                                  \
-	{ nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, SetScope::AUTOMATIC, nullptr, nullptr }
+	{                                                                                                                  \
+		nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, SetScope::AUTOMATIC, nullptr, \
+		    nullptr                                                                                                    \
+	}
 
 #define DUCKDB_SETTING_ALIAS(_ALIAS, _SETTING_INDEX)                                                                   \
 	{ _ALIAS, _SETTING_INDEX }
@@ -294,7 +298,7 @@ void DBConfig::SetOptionsByName(const case_insensitive_map_t<Value> &values) {
 
 void DBConfig::SetOption(optional_ptr<DatabaseInstance> db, const ConfigurationOption &option, const Value &value) {
 	lock_guard<mutex> l(config_lock);
-	Value input = value.DefaultCastAs(ParseLogicalType(option.parameter_type));
+	Value input = DBConfig::CastOptionIfNecessary(value, option);
 	if (option.default_value) {
 		// generic option
 		if (option.set_callback) {
@@ -439,6 +443,28 @@ LogicalType DBConfig::ParseLogicalType(const string &type) {
 	return type_id;
 }
 
+Value DBConfig::CastOptionIfNecessary(ClientContext &context, const Value &value, const ConfigurationOption &option) {
+	if (value.type() == DBConfig::ParseLogicalType(option.parameter_type)) {
+		return value;
+	}
+	if (option.alternative_parameter_type != nullptr &&
+	    value.type() == DBConfig::ParseLogicalType(option.alternative_parameter_type)) {
+		return value;
+	}
+	return value.CastAs(context, DBConfig::ParseLogicalType(option.parameter_type));
+}
+
+Value DBConfig::CastOptionIfNecessary(const Value &value, const ConfigurationOption &option) {
+	if (value.type() == DBConfig::ParseLogicalType(option.parameter_type)) {
+		return value;
+	}
+	if (option.alternative_parameter_type != nullptr &&
+	    value.type() == DBConfig::ParseLogicalType(option.alternative_parameter_type)) {
+		return value;
+	}
+	return value.DefaultCastAs(DBConfig::ParseLogicalType(option.parameter_type));
+}
+
 void DBConfig::AddExtensionOption(const string &name, string description, LogicalType parameter,
                                   const Value &default_value, set_option_callback_t function, SetScope default_scope) {
 	extension_parameters.insert(make_pair(
diff --git a/src/main/extension/CMakeLists.txt b/src/main/extension/CMakeLists.txt
index b170480..3a9ab41 100644
--- a/src/main/extension/CMakeLists.txt
+++ b/src/main/extension/CMakeLists.txt
@@ -99,6 +99,10 @@ add_library(
   extension_alias.cpp extension_helper.cpp extension_install.cpp
   extension_load.cpp extension_loader.cpp)
 
+target_compile_definitions(
+  duckdb_main_extension
+  PRIVATE DUCKDB_EXTENSION_DIRECTORIES="${EXTENSION_DIRECTORIES}")
+
 set(ALL_OBJECT_FILES
     ${ALL_OBJECT_FILES} $<TARGET_OBJECTS:duckdb_main_extension>
     ${ALL_OBJECT_FILES} ${generated_loader_obj_files}
diff --git a/src/main/extension/extension_install.cpp b/src/main/extension/extension_install.cpp
index d0996d9..4f660be 100644
--- a/src/main/extension/extension_install.cpp
+++ b/src/main/extension/extension_install.cpp
@@ -58,56 +58,95 @@ string ExtensionHelper::ExtensionInstallDocumentationLink(const string &extensio
 	return link;
 }
 
-duckdb::string ExtensionHelper::DefaultExtensionFolder(FileSystem &fs) {
-	string home_directory = fs.GetHomeDirectory();
-	// exception if the home directory does not exist, don't create whatever we think is home
-	if (!fs.DirectoryExists(home_directory)) {
-		throw IOException("Can't find the home directory at '%s'\nSpecify a home directory using the SET "
-		                  "home_directory='/path/to/dir' option.",
-		                  home_directory);
-	}
-	string res = home_directory;
-	res = fs.JoinPath(res, ".duckdb");
-	res = fs.JoinPath(res, "extensions");
-	return res;
+vector<duckdb::string> ExtensionHelper::DefaultExtensionFolders(FileSystem &fs) {
+	vector<duckdb::string> default_folders;
+// These fallbacks are necessary if the user doesn't use the CMake build.
+#ifndef DUCKDB_EXTENSION_DIRECTORIES
+#ifdef _WIN32
+#define DUCKDB_EXTENSION_DIRECTORIES "~\\.duckdb\\extensions"
+#else
+#define DUCKDB_EXTENSION_DIRECTORIES "~/.duckdb/extensions"
+#endif
+#endif
+	string dirs_string(DUCKDB_EXTENSION_DIRECTORIES);
+
+	// Skip if empty
+	if (dirs_string.empty()) {
+		return default_folders;
+	}
+
+	// Split the string by separator
+	auto directories = StringUtil::Split(dirs_string, ';');
+
+	for (auto &dir : directories) {
+		// Skip empty directories
+		if (dir.empty()) {
+			continue;
+		}
+
+		default_folders.push_back(dir);
+	}
+
+	return default_folders;
 }
 
-string ExtensionHelper::GetExtensionDirectoryPath(ClientContext &context) {
+vector<string> ExtensionHelper::GetExtensionDirectoryPath(ClientContext &context) {
 	auto &db = DatabaseInstance::GetDatabase(context);
 	auto &fs = FileSystem::GetFileSystem(context);
 	return GetExtensionDirectoryPath(db, fs);
 }
 
-string ExtensionHelper::GetExtensionDirectoryPath(DatabaseInstance &db, FileSystem &fs) {
-	string extension_directory;
+vector<string> ExtensionHelper::GetExtensionDirectoryPath(DatabaseInstance &db, FileSystem &fs) {
+	vector<string> extension_directories;
 	auto &config = db.config;
-	if (!config.options.extension_directory.empty()) { // create the extension directory if not present
-		extension_directory = config.options.extension_directory;
-		// TODO this should probably live in the FileSystem
-		// convert random separators to platform-canonic
-	} else { // otherwise default to home
-		extension_directory = DefaultExtensionFolder(fs);
-	}
 
-	extension_directory = fs.ConvertSeparators(extension_directory);
-	// expand ~ in extension directory
-	extension_directory = fs.ExpandPath(extension_directory);
+	if (!config.options.extension_directories.empty()) {
+		// Add all configured extension directories
+		for (const auto &dir : config.options.extension_directories) {
+			extension_directories.push_back(dir);
+		}
+	} else {
+		// Add default extension directory if no custom directories configured
+		for (const auto &default_dir : ExtensionHelper::DefaultExtensionFolders(fs)) {
+			extension_directories.push_back(default_dir);
+		}
+	}
 
+	// Process all directories with common path operations
 	auto path_components = PathComponents();
-	for (auto &path_ele : path_components) {
-		extension_directory = fs.JoinPath(extension_directory, path_ele);
+	for (auto &extension_directory : extension_directories) {
+		// convert random separators to platform-canonic
+		extension_directory = fs.ConvertSeparators(extension_directory);
+		// expand ~ in extension directory
+		extension_directory = fs.ExpandPath(extension_directory);
+
+		// Add path components (version and platform)
+		for (auto &path_ele : path_components) {
+			extension_directory = fs.JoinPath(extension_directory, path_ele);
+		}
 	}
 
-	return extension_directory;
+	return extension_directories;
 }
 
 string ExtensionHelper::ExtensionDirectory(DatabaseInstance &db, FileSystem &fs) {
 #ifdef WASM_LOADABLE_EXTENSIONS
 	throw PermissionException("ExtensionDirectory functionality is not supported in duckdb-wasm");
 #endif
-	string extension_directory = GetExtensionDirectoryPath(db, fs);
+	auto extension_directories = GetExtensionDirectoryPath(db, fs);
+	// TODO: This should never be the case given the implementation of GetExtensionDirectoryPath
+	// should we still keep this check?
+	D_ASSERT(!extension_directories.empty());
+
+	string extension_directory = extension_directories[0]; // Use first/primary directory
 	{
 		if (!fs.DirectoryExists(extension_directory)) {
+			string home_directory = fs.GetHomeDirectory();
+			if (extension_directory.rfind(home_directory, 0) == 0 && !fs.DirectoryExists(home_directory)) {
+				throw IOException("Can't find the home directory at '%s'\nSpecify a home directory using the SET "
+				                  "home_directory='/path/to/dir' option.",
+				                  home_directory);
+			}
 			fs.CreateDirectoriesRecursive(extension_directory);
 		}
 	}
diff --git a/src/main/extension/extension_load.cpp b/src/main/extension/extension_load.cpp
index 4f7f7d2..c034ef8 100644
--- a/src/main/extension/extension_load.cpp
+++ b/src/main/extension/extension_load.cpp
@@ -11,6 +11,8 @@
 #include "duckdb/main/settings.hpp"
 #include "mbedtls_wrapper.hpp"
 
+#include <iostream>
+
 #ifndef DUCKDB_NO_THREADS
 #include <thread>
 #endif // DUCKDB_NO_THREADS
@@ -400,19 +402,43 @@ bool ExtensionHelper::TryInitialLoad(DatabaseInstance &db, FileSystem &fs, const
 		filename = address;
 #else
 
-		string local_path = !db.config.options.extension_directory.empty()
-		                        ? db.config.options.extension_directory
-		                        : ExtensionHelper::DefaultExtensionFolder(fs);
-
-		// convert random separators to platform-canonic
-		local_path = fs.ConvertSeparators(local_path);
-		// expand ~ in extension directory
-		local_path = fs.ExpandPath(local_path);
-		auto path_components = PathComponents();
-		for (auto &path_ele : path_components) {
-			local_path = fs.JoinPath(local_path, path_ele);
+		// Local function to process local path
+		auto ComputeLocalExtensionPath = [&fs](const string &base_path, const string &extension_name) -> string {
+			// convert random separators to platform-canonic
+			string local_path = fs.ConvertSeparators(base_path);
+			// expand ~ in extension directory
+			local_path = fs.ExpandPath(local_path);
+			auto path_components = PathComponents();
+			for (auto &path_ele : path_components) {
+				local_path = fs.JoinPath(local_path, path_ele);
+			}
+			return fs.JoinPath(local_path, extension_name + ".duckdb_extension");
+		};
+
+		// Collect all directories to search for extensions
+		vector<string> search_directories(db.config.options.extension_directories);
+
+		// Add default extension directory if no custom directories configured
+		if (search_directories.empty()) {
+			for (const auto &path : ExtensionHelper::DefaultExtensionFolders(fs)) {
+				search_directories.push_back(path);
+			}
+		}
+
+		// Try each directory in sequence until extension is found
+		bool found = false;
+		for (const auto &directory : search_directories) {
+			filename = ComputeLocalExtensionPath(directory, extension_name);
+			if (fs.FileExists(filename)) {
+				found = true;
+				break;
+			}
+		}
+
+		// If not found in any directory, use the first directory for error reporting
+		if (!found) {
+			filename = ComputeLocalExtensionPath(search_directories[0], extension_name);
 		}
-		filename = fs.JoinPath(local_path, extension_name + ".duckdb_extension");
 #endif
 	} else {
 		direct_load = true;
diff --git a/src/main/settings/autogenerated_settings.cpp b/src/main/settings/autogenerated_settings.cpp
index acfbf10..f6b6a3c 100644
--- a/src/main/settings/autogenerated_settings.cpp
+++ b/src/main/settings/autogenerated_settings.cpp
@@ -364,22 +364,6 @@ Value ExplainOutputSetting::GetSetting(const ClientContext &context) {
 	return Value(StringUtil::Lower(EnumUtil::ToString(config.explain_output_type)));
 }
 
-//===----------------------------------------------------------------------===//
-// Extension Directory
-//===----------------------------------------------------------------------===//
-void ExtensionDirectorySetting::SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &input) {
-	config.options.extension_directory = input.GetValue<string>();
-}
-
-void ExtensionDirectorySetting::ResetGlobal(DatabaseInstance *db, DBConfig &config) {
-	config.options.extension_directory = DBConfigOptions().extension_directory;
-}
-
-Value ExtensionDirectorySetting::GetSetting(const ClientContext &context) {
-	auto &config = DBConfig::GetConfig(context);
-	return Value(config.options.extension_directory);
-}
-
 //===----------------------------------------------------------------------===//
 // External Threads
 //===----------------------------------------------------------------------===//
diff --git a/src/main/settings/custom_settings.cpp b/src/main/settings/custom_settings.cpp
index f1594fd..395b526 100644
--- a/src/main/settings/custom_settings.cpp
+++ b/src/main/settings/custom_settings.cpp
@@ -680,6 +680,39 @@ void EnableLogging::ResetGlobal(DatabaseInstance *db_p, DBConfig &config) {
 	db.GetLogManager().SetEnableLogging(false);
 }
 
+//===----------------------------------------------------------------------===//
+// Extension Directory
+//===----------------------------------------------------------------------===//
+void ExtensionDirectorySetting::SetGlobal(DatabaseInstance *db, DBConfig &config, const Value &input) {
+	config.options.extension_directories.clear();
+
+	if (input.type() == LogicalType::VARCHAR) {
+		// Backward compatibility: This options once was a single string.
+		auto value = input.GetValue<string>();
+		if (!value.empty()) {
+			config.options.extension_directories.emplace_back(value);
+		}
+	} else {
+		auto &list = ListValue::GetChildren(input);
+		for (auto &val : list) {
+			config.options.extension_directories.emplace_back(val.GetValue<string>());
+		}
+	}
+}
+
+void ExtensionDirectorySetting::ResetGlobal(DatabaseInstance *db, DBConfig &config) {
+	config.options.extension_directories = DBConfig().options.extension_directories;
+}
+
+Value ExtensionDirectorySetting::GetSetting(const ClientContext &context) {
+	auto &config = DBConfig::GetConfig(context);
+	vector<Value> extension_directories;
+	for (auto &dir : config.options.extension_directories) {
+		extension_directories.emplace_back(dir);
+	}
+	return Value::LIST(LogicalType::VARCHAR, std::move(extension_directories));
+}
+
 //===----------------------------------------------------------------------===//
 // Logging Mode
 //===----------------------------------------------------------------------===//
diff --git a/test/api/test_reset.cpp b/test/api/test_reset.cpp
index f07f601..2f2c1b4 100644
--- a/test/api/test_reset.cpp
+++ b/test/api/test_reset.cpp
@@ -4,6 +4,7 @@
 #include <iostream>
 #include <map>
 #include <set>
+#include <cstring>
 
 using namespace duckdb;
 using namespace std;
@@ -79,7 +80,7 @@ OptionValueSet GetValueForOption(const string &name, const LogicalType &type) {
 	    {"force_compression", {"uncompressed", "Uncompressed"}},
 	    {"home_directory", {"test"}},
 	    {"allow_extensions_metadata_mismatch", {"true"}},
-	    {"extension_directory", {"test"}},
+	    {"extension_directory", {"test", "[test]"}},
 	    {"max_expression_depth", {50}},
 	    {"max_memory", {"4.0 GiB"}},
 	    {"max_temp_directory_size", {"10.0 GiB"}},
@@ -267,12 +268,18 @@ TEST_CASE("Test RESET statement for ClientConfig options", "[api]") {
 		}
 		auto original_value = GetValueForSetting(con, option.name, option.type);
 		for (auto &value_pair : value_set.pairs) {
+			// special case for extension_directory to do backward-compatibility testing
+			auto parameter_type = option.type;
+			if (option.name == "extension_directory") {
+				parameter_type = LogicalType::VARCHAR;
+			}
+
 			// Get the new value for the option
 			auto input = value_pair.input.CastAs(*con.context, option.type);
 			// Set the new option
 			REQUIRE_NO_FAIL(con.Query(StringUtil::Format("SET %s = %s", option.name, input.ToSQLString())));
 
-			auto changed_value = GetValueForSetting(con, option.name, option.type);
+			auto changed_value = GetValueForSetting(con, option.name, parameter_type);
 
 			// Get the value of the option again
 			REQUIRE_VALUE_EQUAL(option.name, changed_value, value_pair.output);
@@ -280,7 +287,7 @@ TEST_CASE("Test RESET statement for ClientConfig options", "[api]") {
 			// reset the option again
 			REQUIRE_NO_FAIL(con.Query(StringUtil::Format("RESET %s", option.name)));
 
-			auto reset_value = GetValueForSetting(con, option.name, option.type);
+			auto reset_value = GetValueForSetting(con, option.name, parameter_type);
 
 			// Get the reset value of the option
 			REQUIRE_VALUE_EQUAL(option.name, reset_value, original_value);
diff --git a/test/extension/install_extension.test_slow b/test/extension/install_extension.test_slow
index 0bcf72e..1ee8876 100644
--- a/test/extension/install_extension.test_slow
+++ b/test/extension/install_extension.test_slow
@@ -72,6 +72,33 @@ select count(*) from glob('__TEST_DIR__/extension_directory/**/loadable_extensio
 ----
 1
 
+# unload again
+restart
+
+# Ensure that using an array of extension directories works.
+statement ok
+SET extension_directory=['__TEST_DIR__/extension_directory_a', '__TEST__DIR__/second_extension_directory_b']
+
+statement error
+LOAD 'loadable_extension_demo';
+----
+
+# can install after setting directory, even if the extension directory does not yet exist
+statement ok
+INSTALL '__BUILD_DIRECTORY__/test/extension/loadable_extension_demo.duckdb_extension';
+
+# can load now
+statement ok
+LOAD 'loadable_extension_demo';
+
+# Switching the order shouldn't make a difference
+statement ok
+SET extension_directory=['__TEST_DIR__/extension_directory_b', '__TEST__DIR__/second_extension_directory_a']
+
+statement ok
+LOAD 'loadable_extension_demo';
+
+
 # unload again
 restart
 
